<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spelling Bee</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css?v={{ range(1,99999)|random }}">
</head>
<body>

<!-- CONFETTI CANVAS -->
<canvas id="confetti-canvas"></canvas>

<!-- ATMOSPHERE CANVAS -->
<canvas id="atmo-canvas"></canvas>


<!-- ================= MENU SCREEN ================= -->
<div id="menu-screen" class="screen active screen-enter">
  <div class="menu-card">
    <h1 class="logo"><span class="logo-spelling">Spelling</span> <span class="logo-bee">Bee</span></h1>
    <div class="bee-flight-area">
      <div id="flying-bee" class="flying-bee">ğŸ</div>
    </div>
    <p class="tagline">How fast can you spell?</p>

    <input type="text" id="player-name" class="name-input" placeholder="Enter your name to play..." maxlength="20" autocomplete="off" />

    <div class="difficulty-buttons">
      <button class="menu-btn easy-btn" onclick="startGame('easy')">
        <span class="btn-icon">ğŸŒ±</span>
        <span class="btn-label">Easy</span>
      </button>
      <button class="menu-btn medium-btn" onclick="startGame('medium')">
        <span class="btn-icon">âš¡</span>
        <span class="btn-label">Medium</span>
      </button>
      <button class="menu-btn hard-btn" onclick="startGame('hard')">
        <span class="btn-icon">ğŸ”¥</span>
        <span class="btn-label">Hard</span>
      </button>
    </div>

    <button class="lb-link" onclick="showLeaderboard()">ğŸ† Leaderboard</button>
  </div>
</div>

<!-- ================= GAME SCREEN ================= -->
<div id="game-screen" class="screen">

  <!-- TOP HUD -->
  <div class="hud">
    <div class="timer-wrapper">
      <svg class="timer-svg" viewBox="0 0 120 120">
        <circle class="timer-bg" cx="60" cy="60" r="50"/>
        <circle id="timer-circle" class="timer-progress" cx="60" cy="60" r="50"/>
      </svg>
      <div id="timer-text" class="timer-text">60</div>
    </div>

    <div class="hud-center">
      <div id="difficulty-badge" class="difficulty-badge">EASY</div>
      <div id="streak-display" class="streak-display hidden">
        <span id="streak-count" class="streak-count">0</span>
        <span class="streak-label">streak</span>
      </div>
      <div id="player-tag" class="player-tag"></div>
    </div>

    <div class="score-wrapper">
      <div id="score" class="score">0</div>
      <div class="score-label">Score</div>
    </div>
  </div>

  <!-- ROUND INDICATOR -->
  <div id="round-indicator" class="round-indicator">Round 1/3  â€¢  Word 1/3</div>

  <!-- BONUS POPUP -->
  <div id="bonus-popup" class="bonus-popup hidden"></div>

  <!-- PENALTY POPUP -->
  <div id="penalty-popup" class="penalty-popup hidden"></div>

  <!-- REFERENCE IMAGE -->
  <div class="ref-image-wrapper">
    <div id="ref-image" class="ref-image"></div>
    <img id="ref-image-photo" class="ref-image-photo hidden" alt="" />
  </div>

  <!-- GAME AREA -->
  <div class="game-area">
    <div class="word-section">
      <button onclick="playAudio()" class="sound-btn" title="Listen again (click twice for slow)">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
          <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
          <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
        </svg>
      </button>
      <div id="word-display" class="word"></div>
    </div>
  </div>

  <!-- KEYBOARD -->
  <div id="letter-bank" class="letter-bank"></div>

  <!-- QUIT BUTTON -->
  <button class="quit-btn" onclick="confirmQuit()" title="Back to menu">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
    </svg>
  </button>

  <!-- ROUND TRANSITION OVERLAY -->
  <div id="round-transition" class="round-transition hidden">
    <div class="round-transition-card">
      <div class="rt-emoji" id="rt-emoji">ğŸ‰</div>
      <h2 class="rt-title" id="rt-title">Round 1 Complete!</h2>
      <div class="rt-stats">
        <div class="rt-stat">
          <span class="rt-stat-value" id="rt-round-score">0</span>
          <span class="rt-stat-label">Round Score</span>
        </div>
        <div class="rt-stat">
          <span class="rt-stat-value" id="rt-total-score">0</span>
          <span class="rt-stat-label">Total Score</span>
        </div>
        <div class="rt-stat">
          <span class="rt-stat-value" id="rt-streak">0</span>
          <span class="rt-stat-label">Best Streak</span>
        </div>
      </div>
      <div class="rt-next" id="rt-next">âš¡ Round 2 starting...</div>
      <div class="rt-progress-bar"><div class="rt-progress-fill" id="rt-progress-fill"></div></div>
    </div>
  </div>

</div>

<!-- ================= QUIT CONFIRMATION ================= -->
<div id="quit-modal" class="modal-overlay hidden">
  <div class="modal-card">
    <div class="modal-icon">âš ï¸</div>
    <h3 class="modal-title">Leave Game?</h3>
    <p class="modal-text">Your progress will be lost.</p>
    <div class="modal-buttons">
      <button class="menu-btn secondary-btn" onclick="closeQuitModal()">
        <span class="btn-label">Keep Playing</span>
      </button>
      <button class="menu-btn danger-btn" onclick="quitGame()">
        <span class="btn-label">Leave</span>
      </button>
    </div>
  </div>
</div>

<!-- ================= LEADERBOARD MODAL ================= -->
<div id="leaderboard-modal" class="modal-overlay hidden">
  <div class="modal-card modal-card-large">
    <h3 class="modal-title">ğŸ† Leaderboard</h3>
    <div class="lb-tabs">
      <button class="lb-tab active" onclick="switchLbTab('easy')">Easy</button>
      <button class="lb-tab" onclick="switchLbTab('medium')">Medium</button>
      <button class="lb-tab" onclick="switchLbTab('hard')">Hard</button>
    </div>
    <div id="lb-list" class="lb-list">
      <p class="lb-empty">No scores yet. Be the first!</p>
    </div>
    <div class="modal-buttons" style="margin-top:16px">
      <button class="menu-btn secondary-btn" onclick="closeLeaderboard()">
        <span class="btn-label">Close</span>
      </button>
    </div>
  </div>
</div>

<!-- ================= GAME OVER SCREEN ================= -->
<div id="game-over-screen" class="screen">
  <div class="game-over-card">
    <div class="trophy">ğŸ†</div>
    <h2 class="game-over-title">Game Complete!</h2>

    <div id="new-best" class="new-best hidden">New Best!</div>

    <div class="final-score-display">
      <span class="final-score-number" id="final-score-number">0</span>
      <span class="final-score-label">points</span>
    </div>

    <div class="final-stats-row">
      <div class="final-stat">
        <span id="final-words-completed" class="final-stat-value">0/9</span>
        <span class="final-stat-label">Words</span>
      </div>
      <div class="final-stat">
        <span id="final-streak" class="final-stat-value">0</span>
        <span class="final-stat-label">Best Streak</span>
      </div>
    </div>

    <div id="score-breakdown" class="score-breakdown"></div>

    <div id="final-rank" class="final-rank hidden"></div>

    <div id="review-section" class="review-section hidden">
      <h3>Words to practice:</h3>
      <div id="review-words" class="review-words"></div>
    </div>

    <div id="game-over-leaderboard" class="game-over-leaderboard"></div>

    <div class="game-over-buttons">
      <button onclick="returnToMenu()" class="menu-btn secondary-btn">
        <span class="btn-label">Menu</span>
      </button>
      <button onclick="playAgain()" class="menu-btn primary-btn">
        <span class="btn-label">Play Again</span>
      </button>
    </div>
  </div>
</div>

<script src="/static/script.js?v={{ range(1,99999)|random }}"></script>
</body>
</html>
